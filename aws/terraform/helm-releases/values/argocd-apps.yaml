## Chart source : https://artifacthub.io/packages/helm/argo/argocd-apps

# -- Deploy Argo CD Applications within this helm release
## Ref: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/
applications:
  sample-app:
    namespace: argocd
    project: demo-project
    sources:
      - repoURL: 'https://github.com/ishuar/argocd-multi-cluster.git'
        path: charts/sample-app
        targetRevision: feat/aws
        helm:
          valueFiles:
            - $values/argocd/envs/dev/aws/eu-central-01/demo-app/values.yaml
            - ingress:
                hosts:
                  - host: sample-app.eu-01-a.${PREFIX}.com
                    paths:
                      - path: /
                        pathType: ImplementationSpecific
                tls:
                - secretName: sample-app-tls
                  hosts:
                    - sample-app.eu-01-a.${PREFIX}.com

      - repoURL: 'https://github.com/ishuar/argocd-multi-cluster.git'
        targetRevision: feat/aws
        ref: values
    destination:
      server: https://kubernetes.default.svc
      namespace: default
    syncPolicy:
      automated:
        prune: false
        selfHeal: false
    revisionHistoryLimit: null
    info:
      - name: 'Info'
        value: 'sample application for demo purposes'

# -- Deploy Argo CD Projects within this helm release
## Ref: https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/
projects:
  demo-project:
    namespace: argocd
    description: Project for all applications involved in the demo-project tasks.
    sourceRepos:
      - '*'
    destinations:
      - server: https://kubernetes.default.svc
        namespace: '*'
    sourceNamespaces:
      - argocd
    clusterResourceWhitelist:
      - group: '*'
        kind: '*'
